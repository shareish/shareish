<!-- Si l'utilisateur qui consulte la page est le même mec qui l'a posté il peut même modifier des trucs dessus etc. -->

{% extends 'mymap/base.html' %} {% load static %} {% block content %}
<main>

    <div class="container rounded bg-white mt-5 mb-5">
        <div class="row">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
            <div id="carouselExampleControls" class="col-md-6 border-right carousel slide" style="width:300px;" data-bs-ride="carousel">
                <div class="carousel-inner">
                    {% for image in images %} {% if image == images.1 %}
                    <div class="carousel-item active">
                        <img src={{ image.image.url }} class="d-block w-100" alt="..." height="300">
                    </div>
                    {% else %}
                    <div class="carousel-item col-md-6">
                        <img src={{ image.image.url }} class="d-block w-100" alt="..." height="300">
                    </div>
                    {% endif %} {% endfor %}
                </div>
                <button class="carousel-control-prev " type="button " data-bs-target="#carouselExampleControls " data-bs-slide="prev">
              <span class="carousel-control-prev-icon " aria-hidden="true "></span>
              <span class="visually-hidden ">Previous</span>
            </button>
                <button class="carousel-control-next " type="button " data-bs-target="#carouselExampleControls " data-bs-slide="next">
              <span class="carousel-control-next-icon " aria-hidden="true "></span>
              <span class="visually-hidden ">Next</span>
            </button>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js " integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf " crossorigin="anonymous "></script>

            <div class="col-md-6 border-right ">
                <div class="p-3 py-5 ">
                    <div class="d-flex justify-content-between align-items-center mb-3 ">
                        <h2 class="text-right ">{{ barter.name }} ({{ barter.barter_type }})</h2>
                    </div>
                    <div class="row mt-2 ">
                        <h5 class="col-md-12 ">Description</h5>
                        <div class="col-md-12 ">{{barter.description}}</div>
                    </div>
                    {% if barter.category2 %}
                    <div class="row mt-3 ">
                        <h5 class="col-md-12 ">Categories</h5>
                        <div class="col-md-12 ">{{ barter.category1 }}<br />{{ barter.category2 }}<br />{{ barter.category3 }}</div>
                    </div>
                    {% else %}
                    <div class="row mt-3 ">
                        <h5 class="col-md-12 ">Category</h5>
                        <div class="col-md-12 ">{{ barter.category1 }}</div>
                    </div>
                    {% endif %}

                    <div class="row mt-4 "></div>
                    <div class="row mt-4 ">
                        <h5 class="col-md-12 ">About User</h5>
                        <div class="col-md-6 ">
                            <a href={% url 'profil' barter.user.id %}>
                                <img class="rounded-circle" width="150px" src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg ">
                            </a>
                        </div>
                        <div class="col-md-6 " style="margin-top:50px; margin-bottom:50px; ">
                            <div class="font-weight-bold ">{{user.username}}</div>
                            <div class="text-black-50 ">{{user.email}}</div>
                            <div class="text-black-75 ">{{user.description}}</div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div id="minimap" style="height: 400px;"></div>
    </div>
</main>

<script>
    var location_x = "{{ barter.location.x }} ";
    var location_y = "{{ barter.location.y }} ";
    var map = L.map('minimap', {
        center: [location_y, location_x],
        zoom: 14
    });

    L.marker([location_y, location_x], {}).addTo(map);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png ', {
        maxZoom: 19,
        zoom: 16,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright ">OpenStreetMap</a> contributors'
    }).addTo(map);
</script>
{% endblock %}